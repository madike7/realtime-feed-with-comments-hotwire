<div class="container mb-5">
  <div class="text-center"><h1>Fan Wall</h1></div>
  <%= turbo_stream_from :posts %> <!-- akouei gia broadcasts, me target 'posts' -->
  <%= turbo_stream_from [current_user, :posts] %> <!-- gia na kanw broadcast ston user pou kanei ekeinh th stigmh like sto post, to neo icon -->
  
  <!-- edw kanw broadcast apo to model post, to post_count se kathe create kai destroy -->
  <span id="post_counter"><%= render partial: 'posts/count', locals: { count: @pagy.count } %></span> <!-- me to @pagy pairnw to synoliko arithmo twn post, kai oxi mono tis selidas pou vriskomai -->

  <div class="d-flex justify-content-center row">
    <div class="col-md-8">
      <%#= turbo_frame_tag :post_form do %> <!-- sto postscontroller kanw replace ti forma -->
        <!-- button gia to neo post pou emfanizei to frame me th forma 
        kanontas click sto button, kanoume replace to adeio "new_post" turbo_frame me th forma gia to new post.
        Otan ginei to submit, ginetai prepend to new post sti lista twn posts kai update to "new_post" frame pali se adeio -->
        <div class="row">
          <%= link_to "New post", new_post_path, data: { turbo_frame: "new_post" }, class: "btn btn-primary shadow-none" %>
        </div>
        
        <div class="row">
          <!-- adeio frame tag pou ginetai replaced me ti new form-->
          <%= turbo_frame_tag "new_post" %>
        </div>
      <%# end %>
    </div>
  </div>
  <!-- adeio turbo frame pou tha pernaw to turbo stream content apo ton server -->
  <!-- den thelw na kanw replace ta post tis selidas me ta posts tis epomenhs, alla na ta kanw append sto telos tis listas twn hdh yparxwn posts tis selidas pou eimai -->
  <!-- me xrhsh turbo_frame mporw na kanw mono replace, opote tha prepei na xrhsimopoihsw turbo streams gia na kanw append to content tou next page -->
  <%= turbo_frame_tag "page_handler" %> 
  <%= turbo_frame_tag :posts do %> <!-- turbo frame me id "posts" gyrw apo ti lista me ta posts -->
  <!--div id="posts"-->  <!-- target posts opou kanw prepend sto model, gia kathe neo post -->
    <%= render @posts %>  <!-- kanei render to partial _post.html.erb gia kathe post -->
  <!--/div-->
    <%# @posts.each do |post| %>  <!-- idio me to render @posts, protimw to syntomo -->
      <%#= render partial: 'posts/post', locals: { post: post } %>
    <%# end %>
  <% end %>
  <%= render "pagination", pagy: @pagy %> <!-- pagination with pagy, kanw render to partial pagination pou exei to button "load more posts" -->
  <!-- anti na exw to navbar me tis selides, exw ena button pou emfanizei ta post tis epomenhs selidas -->
</div>