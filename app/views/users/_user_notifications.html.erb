<!-- Lookup Notifications where params: {room:}
     Elegxw ton typo tou notification se periptwsh pou exw orisei kai allous typous
     To metatrepw se string mesw tou .name
     Elegxw an o recipient einai o current_user
     kai pairnw ta notifications pou einai unread -->
<% unread = room.notifications_as_room.where(type: MessageNotification.name, 
                                                  recipient: current_user).unread %>

<%= turbo_frame_tag "#{dom_id(current_user)}_#{dom_id(room)}_notifications" do %> <!-- orizw ena turbo frame ws target gia to broadcast update tou model Message, me th voitheia tou dom_id pairnw to swsto private room kai ta notifications mono gia ton current_user -->
  <% if unread.count > 0 %> <!-- render to partial pou emfanizei ton arithmo twn unread notifications an den einai 0 -->
    <%= render partial: 'users/notification_count', locals: { count: unread.count } %>
  <% end %>
<% end %>
  
  

